import{x as Re,g as Be,h as _e,e as L,r as I,s as ie,f as T,w as P,d as m,j as Pe,n as z,k as Ae,q as ze,l as Ne,i as Oe,v as Le}from"./index.1d9da499.js";import{M as U,N as le,J as Ee,E as De,o as re,c as E,V as se,A as ce,e as de,h as He,f as ue,n as A,m as fe,y as N,W as ve,G as O,w as Y,t as Z,i as X,X as Me,q as F,j as K,L as We,z as Ze,Y as Ve,S as je,a as te,Z as Fe,_ as qe,$ as ne,D as Ue,u as Xe,v as Ye,a0 as Ke}from"./index.f0899187.js";import{c as Ge,a as Je,r as Qe}from"./use-route.917c1983.js";import{S as pe,a as et}from"./index.8e571ece.js";let tt=0;function he(){const e=Re(),{name:i="unknown"}=(e==null?void 0:e.type)||{};return`${i}-${++tt}`}function nt(e,i,l){let d=0;const n=e.scrollLeft,a=l===0?1:Math.round(l*1e3/16);function r(){e.scrollLeft+=(i-n)/a,++d<a&&U(r)}r()}function at(e,i,l,d){let n=le(e);const a=n<i,r=l===0?1:Math.round(l*1e3/16),h=(i-n)/r;function u(){n+=h,(a&&n>i||!a&&n<i)&&(n=i),Ee(e,n),a&&n<i||!a&&n>i?U(u):d&&U(d)}u()}function ot(e,i){if(!De||!window.IntersectionObserver)return;const l=new IntersectionObserver(a=>{i(a[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&l.observe(e.value)},n=()=>{e.value&&l.unobserve(e.value)};Be(n),_e(n),re(d)}const[it,lt]=E("sticky"),rt={zIndex:A,position:fe("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var st=L({name:it,props:rt,emits:["scroll","change"],setup(e,{emit:i,slots:l}){const d=I(),n=se(d),a=ie({fixed:!1,width:0,height:0,transform:0}),r=T(()=>ce(e.position==="top"?e.offsetTop:e.offsetBottom)),h=T(()=>{const{fixed:f,height:x,width:S}=a;if(f)return{width:`${S}px`,height:`${x}px`}}),u=T(()=>{if(!a.fixed)return;const f=de(He(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${r.value}px`});return a.transform&&(f.transform=`translate3d(0, ${a.transform}px, 0)`),f}),C=f=>i("scroll",{scrollTop:f,isFixed:a.fixed}),b=()=>{if(!d.value||ve(d))return;const{container:f,position:x}=e,S=O(d),v=le(window);if(a.width=S.width,a.height=S.height,x==="top")if(f){const k=O(f),s=k.bottom-r.value-a.height;a.fixed=r.value>S.top&&k.bottom>0,a.transform=s<0?s:0}else a.fixed=r.value>S.top;else{const{clientHeight:k}=document.documentElement;if(f){const s=O(f),$=k-s.top-r.value-a.height;a.fixed=k-r.value<S.bottom&&k>s.top,a.transform=$<0?-$:0}else a.fixed=k-r.value<S.bottom}C(v)};return P(()=>a.fixed,f=>i("change",f)),ue("scroll",b,{target:n,passive:!0}),ot(d,b),()=>{var f;return m("div",{ref:d,style:h.value},[m("div",{class:lt({fixed:a.fixed}),style:u.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const ct=Y(st),[dt,ae]=E("tab");var ut=L({name:dt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:A,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Z},setup(e,{slots:i}){const l=T(()=>{const n={},{type:a,color:r,disabled:h,isActive:u,activeColor:C,inactiveColor:b}=e;r&&a==="card"&&(n.borderColor=r,h||(u?n.backgroundColor=r:n.color=r));const x=u?C:b;return x&&(n.color=x),n}),d=()=>{const n=m("span",{class:ae("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||X(e.badge)&&e.badge!==""?m(Me,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>m("div",{id:e.id,role:"tab",class:[ae([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[ft,oe]=E("tabs");var vt=L({name:ft,props:{count:F(Number),inited:Boolean,animated:Boolean,duration:F(A),swipeable:Boolean,lazyRender:Boolean,currentIndex:F(Number)},emits:["change"],setup(e,{emit:i,slots:l}){const d=I(),n=h=>i("change",h),a=()=>{var h;const u=(h=l.default)==null?void 0:h.call(l);return e.animated||e.swipeable?m(pe,{ref:d,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[u]}):u},r=h=>{const u=d.value;u&&u.state.active!==h&&u.swipeTo(h,{immediate:!e.inited})};return P(()=>e.currentIndex,r),Pe(()=>{r(e.currentIndex)}),K({swipeRef:d}),()=>m("div",{class:oe("content",{animated:e.animated||e.swipeable})},[a()])}});const[be,W]=E("tabs"),ht={type:fe("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:Z,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:Z,lineWidth:A,lineHeight:A,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},me=Symbol(be);var bt=L({name:be,props:ht,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:i,slots:l}){let d,n,a;const r=I(),h=I(),u=I(),C=I(),b=he(),f=se(r),[x,S]=We(),{children:v,linkChildren:k}=Ze(me),s=ie({inited:!1,position:"",lineStyle:{},currentIndex:-1}),$=T(()=>v.length>e.swipeThreshold||!e.ellipsis||e.shrink),V=T(()=>({borderColor:e.color,background:e.background})),R=(t,o)=>{var c;return(c=t.name)!=null?c:o},G=T(()=>{const t=v[s.currentIndex];if(t)return R(t,s.currentIndex)}),j=T(()=>ce(e.offsetTop)),J=T(()=>e.sticky?j.value+d:0),D=t=>{const o=h.value,c=x.value;if(!$.value||!o||!c||!c[s.currentIndex])return;const g=c[s.currentIndex].$el,y=g.offsetLeft-(o.offsetWidth-g.offsetWidth)/2;nt(o,y,t?0:+e.duration)},B=()=>{const t=s.inited;z(()=>{const o=x.value;if(!o||!o[s.currentIndex]||e.type!=="line"||ve(r.value))return;const c=o[s.currentIndex].$el,{lineWidth:g,lineHeight:y}=e,w=c.offsetLeft+c.offsetWidth/2,_={width:te(g),backgroundColor:e.color,transform:`translateX(${w}px) translateX(-50%)`};if(t&&(_.transitionDuration=`${e.duration}s`),X(y)){const ee=te(y);_.height=ee,_.borderRadius=ee}s.lineStyle=_})},ge=t=>{const o=t<s.currentIndex?-1:1;for(;t>=0&&t<v.length;){if(!v[t].disabled)return t;t+=o}},H=(t,o)=>{const c=ge(t);if(!X(c))return;const g=v[c],y=R(g,c),w=s.currentIndex!==null;s.currentIndex!==c&&(s.currentIndex=c,o||D(),B()),y!==e.active&&(i("update:active",y),w&&i("change",y,g.title)),a&&!e.scrollspy&&qe(Math.ceil(ne(r.value)-j.value))},M=(t,o)=>{const c=v.find((y,w)=>R(y,w)===t),g=c?v.indexOf(c):0;H(g,o)},Q=(t=!1)=>{if(e.scrollspy){const o=v[s.currentIndex].$el;if(o&&f.value){const c=ne(o,f.value)-J.value;n=!0,at(f.value,c,t?0:+e.duration,()=>{n=!1})}}},ye=(t,o,c)=>{const{title:g,disabled:y}=v[o],w=R(v[o],o);y?i("disabled",w,g):(Ge(e.beforeChange,{args:[w],done:()=>{H(o),Q()}}),i("click",w,g),Je(t)),i("click-tab",{name:w,title:g,event:c,disabled:y})},we=t=>{a=t.isFixed,i("scroll",t)},xe=t=>{z(()=>{M(t),Q(!0)})},Se=()=>{for(let t=0;t<v.length;t++){const{top:o}=O(v[t].$el);if(o>J.value)return t===0?0:t-1}return v.length-1},ke=()=>{if(e.scrollspy&&!n){const t=Se();H(t)}},Ce=()=>v.map((t,o)=>m(ut,ze({key:t.id,id:`${b}-${o}`,ref:S(o),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:o===s.currentIndex,controls:t.id,scrollable:$.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:c=>ye(t,o,c)},Ue(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Te=()=>{if(e.type==="line"&&v.length)return m("div",{class:W("line"),style:s.lineStyle},null)},p=()=>{var t,o,c;const{type:g,border:y,sticky:w}=e,_=[m("div",{ref:w?void 0:u,class:[W("wrap"),{[Fe]:g==="line"&&y}]},[m("div",{ref:h,role:"tablist",class:W("nav",[g,{shrink:e.shrink,complete:$.value}]),style:V.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Ce(),Te(),(o=l["nav-right"])==null?void 0:o.call(l)])]),(c=l["nav-bottom"])==null?void 0:c.call(l)];return w?m("div",{ref:u},[_]):_};P([()=>e.color,Ve],B),P(()=>e.active,t=>{t!==G.value&&M(t)}),P(()=>v.length,()=>{s.inited&&(M(e.active),B(),z(()=>{D(!0)}))});const Ie=()=>{M(e.active,!0),z(()=>{s.inited=!0,u.value&&(d=O(u.value).height),D(!0)})},$e=(t,o)=>i("rendered",t,o);return K({resize:()=>{B(),z(()=>{var t,o;return(o=(t=C.value)==null?void 0:t.swipeRef.value)==null?void 0:o.resize()})},scrollTo:xe}),Ae(B),je(B),re(Ie),ue("scroll",ke,{target:f,passive:!0}),k({id:b,props:e,setLine:B,onRendered:$e,currentName:G,scrollIntoView:D}),()=>m("div",{ref:r,class:W([e.type])},[e.sticky?m(ct,{container:r.value,offsetTop:j.value,onScroll:we},{default:()=>[p()]}):p(),m(vt,{ref:C,count:v.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:H},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const mt=Symbol(),[gt,q]=E("tab"),yt=de({},Qe,{dot:Boolean,name:A,badge:A,title:String,disabled:Boolean,titleClass:Xe,titleStyle:[String,Object],showZeroBadge:Z});var wt=L({name:gt,props:yt,setup(e,{slots:i}){const l=he(),d=I(!1),{parent:n,index:a}=Ye(me);if(!n)return;const r=()=>{var b;return(b=e.name)!=null?b:a.value},h=()=>{d.value=!0,n.props.lazyRender&&z(()=>{n.onRendered(r(),e.title)})},u=T(()=>{const b=r()===n.currentName.value;return b&&!d.value&&h(),b}),C=I(!u.value);return P(u,b=>{b?C.value=!1:Ke(()=>{C.value=!0})}),P(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),Ne(mt,u),()=>{var b;const f=`${n.id}-${a.value}`,{animated:x,swipeable:S,scrollspy:v,lazyRender:k}=n.props;if(!i.default&&!x)return;const s=v||u.value;if(x||S)return m(et,{id:l,role:"tabpanel",class:q("panel-wrapper",{inactive:C.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":f},{default:()=>{var R;return[m("div",{class:q("panel")},[(R=i.default)==null?void 0:R.call(i)])]}});const V=d.value||v||!k?(b=i.default)==null?void 0:b.call(i):null;return K({id:l}),Oe(m("div",{id:l,role:"tabpanel",class:q("panel"),tabindex:s?0:-1,"aria-labelledby":f},[V]),[[Le,s]])}}});const It=Y(wt),$t=Y(bt);export{It as T,$t as a,he as u};
